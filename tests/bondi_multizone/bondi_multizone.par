# Multizone Bondi flow template
# Many options replaced by run script

<parthenon/job>
problem_id = bondi

<parthenon/mesh>
refinement = none
numlevel = 1
nx1 = 128
nx2 = 128
nx3 = 128

<parthenon/meshblock>
nx1 = 128
nx2 = 64
nx3 = 64

<coordinates>
base = ks
transform = exponential
a = 0.0 # spin updated from run_kharma.sh

<parthenon/time>
tlim = 5289680481 # updated from run_kharma.sh
nlim = -1 # updated from run_kharma.sh
dt_min = 0.00001

<GRMHD>
cfl = 0.9
gamma = 1.666667
reconstruction = linear_vl

<bondi>
mdot = 1.0
rs = 316.22776601683796  # (1e2.5)#1000.0 #8.0 #300.0 #
vacuum_logrho= -8.2014518
vacuum_log_u_over_rho = -5.2915149 # updated from run_kharma.sh
r_shell = 8388608 # updated from run_kharma.sh
use_gizmo = false

<gizmo_shell>
datfn = none

<resize_restart>
fname = none # updated from run_kharma.sh
fname_fill = none #, updated from run_kharma.sh
use_dt = false
base = 8
nzone = 7

<floors>
disable_floors = true
rho_min_geom = 1.0e-12
u_min_geom = 1.0e-15

<bounds>
check_inflow_outer = false
check_inflow_inner = false # Hyerin test (12/22/22)
fix_flux_pole      = true

<perturbation>
u_jitter=0

<b_field>
type = vertical # b_field_type updated from run_kharma.sh
solver = none # b_field_solver updated from run_kharma.sh
#norm = true # Hyerin (12/29/22) this increases divB in the boundaries, so won't use here
#beta_min=1000 # Hyerin (12/29/22)
bz = 1e-4
#fix_polar_flux = 0 # Hyerin test (12/22/22)
fix_flux_x1      = 0 #1 # Hyerin test (02/16/23)
initial_cleanup = true # updated from run_kharma.sh

<b_cleanup>
rel_tolerance=1.e-8

<debug>
verbose = 1

<driver>
type = harm
two_sync = true

<implicit>
max_nonlinear_iter = 3

<parthenon/output0>
file_type = hdf5
dt = 528968040 # output0_dt updated from run_kharma.sh
single_precision_output = true
variables = prims.rho, prims.u, prims.uvec, prims.B, fflag, pflag
ghost_zones = true

<parthenon/output1>
file_type = rst
dt = 2644840240 # output1_dt updated from run_kharma.sh
ghost_zones = true

<parthenon/output2>
file_type = hst
dt = 52896800 # output2_dt updated from run_kharma.sh

